<html>
<head>
<title>Hey</title>
<script src="tentacles.js"></script>
<script language="javascript">
function getParameterByName(name, url) {
    if (!url) url = window.location.href;
    name = name.replace(/[\[\]]/g, '\\$&');
    var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
        results = regex.exec(url);
    if (!results) return null;
    if (!results[2]) return '';
    return decodeURIComponent(results[2].replace(/\+/g, ' '));
}

function getPointsForLine(line){
    x = line.x;
    y = line.y;
    x2 = line.x2;
    y2 = line.y2;
    var points = [];
    dx = (x2 - x) / 9;
    dy = (y2 - y) / 9;
    for (i = 0; i <= 9; i++){
        points.push([x + dx * i, y + dy * i]);
    }
    return points;
}


function getPointsForTentacle(tentacle){
    if (tentacle.type == 'line'){
        return getPointsForLine(tentacle);
    } else {
        document.write(JSON.stringify(tentacle));
        return [];
    }
}

var u = getParameterByName("u");
parts = u.split("-"); 
//document.write(parts);
var tents = [];
m = parts[0];
m_t = riklang.morphemes[m].glyph;
for (let t in m_t){
  tents.push(m_t[t]);
} 
a = parts[1];
a_t = riklang.aspects[a].glyph;
tents.push(a_t[0]);
r = parts[2];
r_t = riklang.relations[r].glyph;
tents.push(r_t[0]);
c = parts[3];
c_t = riklang.collectors[c].glyph;
tents.push(c_t[0]);
document.write(JSON.stringify(tents));
//create splines 
var splines = [];
for (let t in tents){
    points = getPointsForTentacle(tents[t]);
    splines.push(points);
}
document.write(JSON.stringify(splines));
//draw
//document.write(riklang.morphemes.Home.glyph[0].type);
</script>
</head>
<body>
<canvas id="rik_win" width="300" height="300" style="border:5px solid #009900;"/>

<script language="javascript">
var c = document.getElementById("rik_win");
var ctx = c.getContext("2d");
ctx.translate(150, 150);

ctx.beginPath();
ctx.arc(0, 0, 75, 0, 2*Math.PI, true);
ctx.stroke();
</script>
</body>
</html>
